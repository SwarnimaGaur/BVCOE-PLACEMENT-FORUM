
<%  @experiences.each do |e| %>

<h1><%= e.user.name%></h1>

<h1> <%=e.round_no %></h1>
<h1> <%=e.content %></h1>
<h1> <%=e.tips%></h1>

<%= link_to 'Edit experience',  { action: :edit, experience_id: e.id }, 
       method: :get,
       data: { confirm: "Edit this experience?" } 
%>
<%= link_to 'Delete experience',  { action: :destroy, experience_id: e.id }, 
       method: :delete,
       data: { confirm: "Delete this experience?" } 
%>

<% session[:experience_id] = e.id%>

No. of  UPVOTES
<h1><%= e.upvotes.count %></h1>

 <% if e.upvotes.where(user_id: current_user.id).first %>

<div>
  <%= form_tag url_for({:controller => "upvote",:action => "destroy",method: :post}) do%>  
  
    <%= hidden_field_tag :user_id, current_user.id %>
    <%= hidden_field_tag :experience_id, e.id %>
    <%= hidden_field_tag :button_id, 'experience_' + e.id.to_s + '_upvote_button' %>
    <%= submit_tag "Upvote", id:'experience_' + e.id.to_s + '_upvote_button'  %></div>
    <% end %>
    <% else %>

<div>
  <%= form_tag url_for({:controller => "upvote",:action => "create",method: :post}) do%>  
  
    <%= hidden_field_tag :user_id, current_user.id %>
    <%= hidden_field_tag :experience_id, e.id %>
    <%= hidden_field_tag :button_id, 'experience_' + e.id.to_s + '_upvote_button' %>
    <%= submit_tag "Upvote", id:'experience_' + e.id.to_s + '_upvote_button'  %></div>
    <% end %>
<% end %>

<h3>Comments</h3>
<% e.comments.each do |comment|%>
  <div>
    <strong><%= comment.user.name %></strong>
    <br>
    <p><%= comment.com %></p>

    <%= link_to 'Delete Comment',  { action: :destroy, controller: :comment, experience_id: e.id, comment_id: comment.id }, 
       method: :delete,
       data: { confirm: "Delete this comment?" } 
%>
  </div>

<% end %>
<%= render 'comment/new',:user_id => e.user_id, :experience_id => session[:experience_id] %>
<% end %>
